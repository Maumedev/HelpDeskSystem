@using Microsoft.AspNetCore.Identity
@using HelpDesk.Core.Modules.Users.Entities
@inject SignInManager<AppUser> SignInManager

<aside class="w-64 bg-white dark:bg-gray-800 text-white flex flex-col sticky top-0 h-screen">
    <div class="p-6 text-2xl font-bold border-b border-gray-300 bg-white text-blue-500 dark:text-white dark:bg-gray-900">
        HelpDesk <span class="text-gray-800 dark:text-blue-500">v1</span>
    </div>

    <nav class="flex-1 mt-6 px-4 space-y-2">

        @{ string current = ViewContext.RouteData.Values["page"]?.ToString() ?? ""; }

        <a asp-page="/Index" class="block py-2.5 px-4 rounded transition text-gray-800 dark:text-white hover:bg-gray-700
         @(current == "/Index" ? "bg-gray-600 text-gray-800 dark:text-white text-white font-bold " : "")">
            Inicio
        </a>

        @if (User.IsInRole("Admin") || User.IsInRole("Agent"))
        {
            <div class="pt-4 pb-1 text-xs font-semibold text-gray-500 uppercase">Gestión</div>
            <a asp-page="/Tickets/Index" class="  block py-2.5 px-4 rounded hover:bg-gray-800 ">
                 Todos los Tickets
            </a>
        }

        @if (User.IsInRole("Admin"))
        {
            <a asp-page="/Admin/Users" class="block py-2.5 px-4 rounded hover:bg-gray-800">
                 Usuarios
            </a>
            <a asp-page="/Admin/Reports" class="block py-2.5 px-4 rounded hover:bg-gray-800">
                 Reportes
            </a>
        }

        <div class="pt-4 pb-1 text-xs font-semibold text-gray-500 uppercase">Personal</div>
        <a asp-page="/Customer/MyTickets" class="block py-2.5 px-4 rounded hover:dark:bg-gray-700 hover:bg-gray-300 text-gray-800 dark:text-white">
             Mis Tickets
        </a>
    </nav>

    <div class="p-4 border-t border-gray-800 text-sm text-gray-400">
        Dept: @User.FindFirst("Department")?.Value
    </div>
</aside>


@* <aside class="w-64 bg-gray-900 text-white h-full flex flex-col">
    <div class="p-6 text-2xl font-bold border-b border-gray-800">
        HelpDesk <span class="text-blue-500">v1</span>
    </div>

    <nav class="flex-1 flex flex-row mt-6 px-4 space-y-2">
        <a asp-page="/Index" class="block py-2.5 px-4 rounded transition hover:bg-gray-800">
             Inicio
        </a>

        @if (User.IsInRole("Admin") || User.IsInRole("Agent"))
        {
            <div class="pt-4 pb-1 text-xs font-semibold text-gray-500 uppercase">Gestión</div>
            <a asp-page="/Tickets/Index" class="block py-2.5 px-4 rounded hover:bg-gray-800">
                🎫 Todos los Tickets
            </a>
        }

        @if (User.IsInRole("Admin"))
        {
            <a asp-page="/Admin/Users" class="block py-2.5 px-4 rounded hover:bg-gray-800">
                👥 Usuarios
            </a>
            <a asp-page="/Admin/Reports" class="block py-2.5 px-4 rounded hover:bg-gray-800">
                📊 Reportes
            </a>
        }

        <div class="pt-4 pb-1 text-xs font-semibold text-gray-500 uppercase">Personal</div>
        <a asp-page="/Customer/MyTickets" class="block py-2.5 px-4 rounded hover:bg-gray-800">
            📩 Mis Tickets
        </a>
    </nav>

    <div class="p-4 border-t border-gray-800 text-sm text-gray-400">
        Dept: @User.FindFirst("Department")?.Value
    </div>
</aside> *@